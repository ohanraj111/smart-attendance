<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Attendance System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>

body {
  font-family: 'Poppins', sans-serif;
  margin: 0;
  color: #fff;
  min-height: 100vh;
  background: linear-gradient(-45deg, #171924, #0a2a43, #223a5e, #1f2022);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  display: flex;
  justify-content: center;
  align-items: center;
}
@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.container {
  background: rgba(0, 0, 0, 0.75);
  padding: 30px;
  border-radius: 16px;
  width: 90%;
  max-width: 500px;
  text-align: center;
  box-shadow: 0 8px 24px rgba(0,0,0,0.2);
}

h1 {
  font-family: 'Baloo 2', cursive;
  font-size: 2.2rem;
  margin-bottom: 20px;
}

button {
  background: #ff7b00;
  border: none;
  padding: 12px 20px;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 600;
  margin: 8px;
  cursor: pointer;
}
button:hover { background: #ffa032; }

input, select {
  padding: 10px;
  margin: 10px 0;
  width: 90%;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
}

table {
  width: 100%;
  margin-top: 10px;
  background: rgba(255,255,255,0.1);
  border-radius: 8px;
}
th, td {
  padding: 8px;
  border-bottom: 1px solid rgba(255,255,255,0.2);
}
th {
  background: rgba(0,0,0,0.5);
}

.page { display: none; }
</style>
</head>
<body>

<div class="container">

  
  <div id="mainPage" class="page" style="display:block;">
    <h1>Welcome</h1>
    <p>Select Your Role</p>
    <button onclick="showPage('studentPage')">Student</button>
    <button onclick="showPage('teacherLoginPage')">Teacher</button>
  </div>

  
  <div id="studentPage" class="page">
    <h1>Student Login</h1>
    <input type="text" id="studentName" placeholder="Enter Name">
    <input type="text" id="rollNo" placeholder="Roll Number">
    <input type="email" id="studentEmail" placeholder="Verified Email ID">
    <button onclick="verifyStudent()">Verify & Continue</button>
    <button onclick="showPage('mainPage')">Back</button>
    <p id="studentError" style="color: red;"></p>
  </div>

  <div id="studentAttendancePage" class="page">
    <h1>Mark Attendance</h1>
    <p id="studentInfo"></p>
    <button onclick="markAttendance('Present')">Present</button>
    <button onclick="markAttendance('Absent')">Absent</button>
    <button onclick="showPage('mainPage')">Logout</button>
  </div>

  
  <div id="teacherLoginPage" class="page">
    <h1>Teacher Login</h1>
    <input type="text" id="teacherName" placeholder="Enter Your Name">
    <input type="password" id="teacherID" placeholder="Enter Teacher ID">
    <button onclick="verifyTeacher()">Login</button>
    <button onclick="showPage('mainPage')">Back</button>
    <p id="teacherError" style="color: red;"></p>
  </div>

  
  <div id="teacherPage" class="page">
    <h1 id="teacherWelcome">Teacher Dashboard</h1>
    <select id="advisorSelect">
      <option value="">Select Class Advisor</option>
    </select>
    <button onclick="showReport()">Show Attendance Report</button>
    <div id="reportArea"></div>
    <button onclick="showPage('mainPage')">Logout</button>
  </div>

</div>

<script>

const studentData = {
  "mohan5307060@gmail.com": { name: "Mohan Raj R", rollNo: "22CS111", dept: "Computer Science", class: "4st Year B", advisor: "Priya" },
  "mohan123@gmail.com": { name: "Dhanush M", rollNo: "22CS062", dept: "Computer Science", class: "4st Year B", advisor: "Priya" }
};

let attendanceRecords = {};


const advisors = [...new Set(Object.values(studentData).map(s => s.advisor))];

const teacherAccounts = {
  "T123": "Prof. Alice",
  "T456": "Prof. Bob"
};

window.onload = () => {
  let select = document.getElementById("advisorSelect");
  advisors.forEach(a => {
    let opt = document.createElement("option");
    opt.value = a;
    opt.textContent = a;
    select.appendChild(opt);
  });
}

function showPage(id) {
  document.querySelectorAll(".page").forEach(p => p.style.display = "none");
  document.getElementById(id).style.display = "block";
}


let currentStudentEmail = "";
function verifyStudent() {
  let email = document.getElementById("studentEmail").value.trim().toLowerCase();
  if (studentData[email]) {
    let s = studentData[email];
    document.getElementById("studentInfo").innerHTML =
      `Name: ${s.name}<br>Roll No: ${s.rollNo}<br>Email: ${email}<br>Dept: ${s.dept}<br>Class: ${s.class}<br>Advisor: ${s.advisor}`;
    currentStudentEmail = email;
    document.getElementById("studentError").textContent = "";
    showPage("studentAttendancePage");
  } else {
    document.getElementById("studentError").textContent = "Email not found!";
  }
}

function markAttendance(status) {
  attendanceRecords[currentStudentEmail] = status;
  alert(`Marked ${status} for ${studentData[currentStudentEmail].name}`);
  showPage("mainPage");
}

function verifyTeacher() {
  let id = document.getElementById("teacherID").value.trim();
  let name = document.getElementById("teacherName").value.trim();
  if (teacherAccounts[id]) {
    document.getElementById("teacherWelcome").textContent = `Welcome, ${name || teacherAccounts[id]}`;
    document.getElementById("teacherError").textContent = "";
    showPage("teacherPage");
  } else {
    document.getElementById("teacherError").textContent = "Invalid Teacher ID!";
  }
}

function showReport() {
  let advisorName = document.getElementById("advisorSelect").value;
  if (!advisorName) {
    alert("Select an advisor first!");
    return;
  }
  let students = Object.entries(studentData)
    .filter(([email, s]) => s.advisor === advisorName);

  let table = `<table><tr><th>Name</th><th>Roll No</th><th>Status</th></tr>`;
  students.forEach(([email, s]) => {
    table += `<tr><td>${s.name}</td><td>${s.rollNo}</td><td>${attendanceRecords[email] || "Not Marked"}</td></tr>`;
  });
  table += "</table>";

  document.getElementById("reportArea").innerHTML = table;
}
</script>

</body>
</html>
